# M11 — Folder-Based Navigation

## Tasks

| Task | Description | Status |
|------|-------------|--------|
| T1 | Folder scanner utility (`folder-scanner.js` + tests) | DONE |
| T2 | ProjectStore refactor — `_pathIndex`, `_buildIndex`, `createProject(folder)`, `listProjectsTree()` | DONE |
| T3 | Preview API tree format + Sidebar UI recursive rendering + 404 redirect | DONE |
| T4 | MCP tool update — `folder` param in `mockup_create_project` | DONE |
| T5 | Code review — path traversal fix, dead code removal, stderr logging | DONE |

## New files
- `src/storage/folder-scanner.js` — recursive project file discovery
- `tests/storage/folder-scanner.test.js` — 12 tests

## Modified files
- `src/storage/project-store.js` — folder-aware storage with in-memory index
- `tests/storage/project-store.test.js` — +11 new tests (folder, tree, path traversal)
- `src/preview/server.js` — tree API, folder sidebar, 404 redirect
- `tests/preview/sidebar.test.js` — updated for tree format + folder tests
- `src/mcp/tools/project-tools.js` — `folder` param in create_project

## Test count: 796 (768 → 796, +28 new)
